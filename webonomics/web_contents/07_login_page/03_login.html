<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.2. Login Page &mdash; Webonomics 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Webonomics 1.0 documentation" href="../index.html" />
    <link rel="up" title="5. Introduction" href="00_index.html" />
    <link rel="next" title="6. Introduction" href="../06_main_page/00_index.html" />
    <link rel="prev" title="5.1. Login Page" href="01_introduction.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>Webonomics 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>5.2. Login Page</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="01_introduction.html">5.1. Login Page</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../06_main_page/00_index.html">6. Introduction</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="login-page">
<h1>5.2. Login Page<a class="headerlink" href="#login-page" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li>We will now work on the Login Page.</li>
<li>We have see all the blocks and tags before, we just need to write the code
here.</li>
<li>First let us write some CSS for our selves.</li>
<li>Go to the <code class="docutils literal"><span class="pre">07_login_page</span></code> directory.</li>
<li>You will have three files here <code class="docutils literal"><span class="pre">login.css</span></code>, <code class="docutils literal"><span class="pre">login.html</span></code> and <code class="docutils literal"><span class="pre">login.php</span></code>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Write down the whole <code class="docutils literal"><span class="pre">login.css</span></code> file from the reference directory.</p>
</div>
<div class="highlight-css"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
        <span class="k">background-color</span><span class="o">:</span> <span class="m">#ff3377</span><span class="p">;</span>
        <span class="k">margin</span><span class="o">:</span><span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.header</span> <span class="p">{</span>
        <span class="k">width</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
        <span class="k">height</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
        <span class="k">background-color</span><span class="o">:</span> <span class="m">#afff00</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
        <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
        <span class="k">margin</span><span class="o">:</span><span class="m">0</span><span class="p">;</span>
        <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.logo</span> <span class="p">{</span>
        <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
        <span class="k">width</span><span class="o">:</span> <span class="m">120px</span><span class="p">;</span>
        <span class="k">height</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
        <span class="k">margin-left</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.name</span> <span class="p">{</span>
        <span class="k">height</span><span class="o">:</span><span class="m">100px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.login_block</span> <span class="p">{</span>
        <span class="k">font-family</span><span class="o">:</span> <span class="s2">&quot;Della Respira&quot;</span><span class="p">;</span>
        <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
        <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
        <span class="k">margin</span><span class="o">:</span> <span class="m">0px</span> <span class="m">140px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.login</span> <span class="p">{</span>
        <span class="k">margin</span><span class="o">:</span><span class="m">0px</span> <span class="m">20px</span><span class="p">;</span>
        <span class="k">color</span><span class="o">:</span><span class="nb">blue</span><span class="p">;</span>
        <span class="k">font-size</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
        <span class="k">padding</span><span class="o">:</span><span class="m">0px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#sign</span> <span class="p">{</span>
        <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
        <span class="k">margin</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
        <span class="k">font-size</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
        <span class="k">font-family</span><span class="o">:</span> <span class="s2">&quot;Della Respira&quot;</span><span class="p">;</span>
        <span class="k">background-color</span><span class="o">:</span> <span class="m">#b0e0e6</span><span class="p">;</span>
        <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">26px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#footer</span> <span class="p">{</span>
        <span class="k">position</span><span class="o">:</span> <span class="k">fixed</span><span class="p">;</span>
        <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
        <span class="k">width</span><span class="o">:</span><span class="m">100%</span><span class="p">;</span>
        <span class="k">height</span><span class="o">:</span> <span class="m">50px</span><span class="p">;</span>
        <span class="k">background-color</span><span class="o">:</span> <span class="m">#afff00</span><span class="p">;</span>
        <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple">
<li>We will now create the login page. Here we will write everything and see the output.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You have the <code class="docutils literal"><span class="pre">login.html</span></code> file in the reference directory.</p>
</div>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre></div></td><td class="code"><div class="highlight"><pre>&lt;!DOCTYPE html&gt;

&lt;!-- We are starting a html document --&gt;
&lt;!-- --&gt;
&lt;html&gt;

&lt;!-- The Head--&gt;
&lt;head&gt;


&lt;!-- Charset --&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;

&lt;!-- Title --&gt;
&lt;title&gt; Login Page - Myzone &lt;/title&gt;


&lt;!-- StyleSheets--&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;login.css&quot;&gt;


&lt;!-- End of Head --&gt;
&lt;/head&gt;


&lt;!-- Start the Body --&gt;
&lt;body&gt;

&lt;div class=&quot;header&quot;&gt;
&lt;!-- Make a Div to put the logo. --&gt;
        &lt;div class=&quot;logo&quot;&gt;
                &lt;img src=&quot;images/logo.png&quot;&gt;
        &lt;/div&gt;


&lt;!-- Make a div to put the name. --&gt;
        &lt;div class=&quot;name&quot;&gt;
                &lt;h1&gt; MyZone.in &lt;/h1&gt;
        &lt;/div&gt;
&lt;/div&gt;



&lt;!-- Make the login block --&gt;
&lt;div class=&quot;login_block&quot;&gt;
        
        
&lt;!--  See the login.css for the properties of the class. --&gt;
        &lt;div class=&quot;login&quot;&gt;
                &lt;p&gt;&lt;b&gt;Login&lt;/b&gt; &lt;/p&gt;
        &lt;/div&gt;


&lt;!-- We have seen form already. Here we just need to make a form and take
     the appropriate inputs. We will take username and password. 
     
     We are using ``placeholder`` to explain what needs to be entered. --&gt;

        &lt;form action=&quot;login.php&quot; method=&quot;post&quot;&gt;
                Username &lt;input id=&quot;textbox&quot; type=&quot;text&quot; name=&quot;uname&quot; required placeholder=&quot;Enter username&quot; size=&quot;60&quot;&gt;
                &lt;br&gt;
                &lt;br&gt;
                Password &lt;input id=&quot;textbox&quot; type=&quot;password&quot; name=&quot;pwd&quot; required placeholder=&quot;Min length of password is 8&quot; size=&quot;60&quot;&gt;
                &lt;br&gt;

                &lt;!-- User can do two actions, either sign in or sign up.
                     SignIn will check if the user is present on the database or no.
                     
                     SignUp will insert the user into the data base.
                --&gt;
                
                &lt;input type=&quot;submit&quot; name=&quot;signin&quot; value=&quot;Sign In&quot; id=&quot;sign&quot;&gt;&lt;/input&gt;
                &lt;input type=&quot;submit&quot; name=&quot;signup&quot; value=&quot;Sign Up&quot; id=&quot;sign&quot;&gt;&lt;/input&gt;
        &lt;/form&gt;
&lt;/div&gt;

&lt;!-- Our CopyRight footer --&gt;
&lt;div id=&quot;footer&quot;&gt;
               &lt;p&gt; &amp;copy &lt;a href=&quot;www.crestrou.com&quot;&gt;www.crestrou.com&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;!-- Close the body and html tags --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</td></tr></table></div>
<ol class="arabic simple">
<li>We now need to write the server side script which will connect to the database and see
if the user is present in the data base or no.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You have the <code class="docutils literal"><span class="pre">login.php</span></code> in the reference directory.</p>
</div>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="cm">/*</span>
<span class="cm"> * Copyright: www.crestrou.com</span>
<span class="cm"> */</span>


<span class="nv">$uname</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;uname&#39;</span><span class="p">];</span>
<span class="nv">$passwd</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;pwd&#39;</span><span class="p">];</span>
<span class="nv">$pas_len</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$passwd</span><span class="p">);</span>

<span class="c1">// create connection</span>

<span class="k">try</span> <span class="p">{</span>

        <span class="cm">/*</span>
<span class="cm">         * Here we will be connecting to the MySql DataBase, we will get the connection</span>
<span class="cm">         * in the $pdo. </span>
<span class="cm">         * </span>
<span class="cm">         * For running any operation we will need this connection.</span>
<span class="cm">         */</span>

        <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=myzone&#39;</span><span class="p">,</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="s1">&#39;root123&#39;</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">         * We will get the ``signin`` variable set if the user has pressed</span>
<span class="cm">         * the sign_in button. This means that we need to get into </span>
<span class="cm">         * 1. Checking if the user is present or not in the data base.</span>
<span class="cm">         * 2. Check if the password sent is the same as that of the one stored in the data base.</span>
<span class="cm">         * 3. If it works fine, we proceed to the next page while passing the vaiable to the next page.</span>
<span class="cm">         */</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;signin&#39;</span><span class="p">]))</span> <span class="p">{</span>

        
            <span class="c1">// Get all the users.</span>
            <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM myzone_users WHERE name=&#39;</span><span class="si">$uname</span><span class="s2">&#39; AND password=&#39;</span><span class="si">$passwd</span><span class="s2">&#39;&quot;</span><span class="p">);</span>
            
            <span class="c1">// We have all the rows in the $row variable.</span>
            <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">fetchALL</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Location: ../06_main_page/main_page.html?n=</span><span class="si">$uname</span><span class="s2">&quot;</span> <span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt;alert(&#39;The Username/Password is incorrect&#39;);&lt;/script&gt;&quot;</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt; window.location = &#39;login.html&#39;;&lt;/script&gt;&quot;</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            
            <span class="c1">//signup action</span>
            <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM myzone_users WHERE name=&#39;</span><span class="si">$uname</span><span class="s2">&#39; AND password=&#39;</span><span class="si">$passwd</span><span class="s2">&#39;&quot;</span><span class="p">);</span>
            <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$statement</span><span class="o">-&gt;</span><span class="na">fetchALL</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">);</span>
            
            <span class="c1">// If row has something, the userexists.</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>

                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt;alert(&#39;The Username already exists&#39;);&lt;/script&gt;&quot;</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt; window.location = &#39;login.html&#39;;&lt;/script&gt;&quot;</span><span class="p">;</span>
            
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            
                <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO myzone_users (name, password) VALUES(&#39;</span><span class="si">$uname</span><span class="s2">&#39;, &#39;</span><span class="si">$passwd</span><span class="s2">&#39;)&quot;</span><span class="p">);</span>
                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt;alert(&#39;Account Created. Please Login!!&#39;);&lt;/script&gt;&quot;</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">&quot;&lt;script&gt; window.location = &#39;login.html&#39;;&lt;/script&gt;&quot;</span><span class="p">;</span>
            
            <span class="p">}</span>
        
        <span class="p">}</span>

<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>

<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="01_introduction.html">5.1. Login Page</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../06_main_page/00_index.html">6. Introduction</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Garima Agarwal, Rishi Agrawal.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>